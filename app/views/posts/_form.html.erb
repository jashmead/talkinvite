<%
  # workaround apparent bug in form_for
  # TBD:  generalize the url builder
  @url = @post.new_record? ? new_person_talk_post_url(@person, @talk) : person_talk_post_url(@person, @talk, @post) 
%>
<%= form_for_jqm [ @person, @talk, @post ], { url: @url } do |f| %>

  <%= render partial: 'shared/error_messages', object: f.object %>

  <%= f.text_field :post_type %>

  <%= f.text_area :post_message, placeholder: :message %>

  <%= render partial: 'posts/submit_button', :object => f %>

<% end %>
