require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "when attempting to visit a protected page" do

    before do
      let(:person) { FactoryGirl.create(:person) }
      visit edit_person_path(person)
      fill_in "Email",    with: person.email
      fill_in "Password", with: person.password
      click_button "Sign in"
    end

    describe "after signing in" do

      it "should render the desired protected page" do
        expect(page).to have_title('Edit profile')
      end

    end

  end

end
